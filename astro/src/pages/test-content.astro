---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Get a sample from each collection
const articles = await getCollection('articles');
const vueArticles = await getCollection('vue-articles');
const platforms = await getCollection('platforms');
const inserts = await getCollection('inserts');

// Get first 5 items from each collection
const sampleArticles = articles.slice(0, 5);
const sampleVueArticles = vueArticles.slice(0, 5);
const samplePlatforms = platforms.slice(0, 5);
const sampleInserts = inserts.slice(0, 5);
---

<BaseLayout title="Content Test">
  <div class="container my-5">
    <h1>Content Collections Test</h1>
    
    <div class="row">
      <div class="col-md-6">
        <h2>Regular Articles ({articles.length} total)</h2>
        <ul class="list-group">
          {sampleArticles.map(article => (
            <li class="list-group-item">
              <strong>{article.data.title || 'Untitled'}</strong>
              <br />
              <small class="text-muted">{article.slug}</small>
            </li>
          ))}
        </ul>
      </div>
      
      <div class="col-md-6">
        <h2>Vue Articles ({vueArticles.length} total)</h2>
        <ul class="list-group">
          {sampleVueArticles.map(article => (
            <li class="list-group-item">
              <strong>{article.data.title || 'Untitled'}</strong>
              <br />
              <small class="text-muted">{article.slug}</small>
            </li>
          ))}
        </ul>
      </div>
    </div>
    
    <div class="row mt-4">
      <div class="col-md-6">
        <h2>Platforms ({platforms.length} total)</h2>
        <ul class="list-group">
          {samplePlatforms.map(platform => (
            <li class="list-group-item">
              <strong>{platform.data.title || 'Untitled'}</strong>
              <br />
              <small class="text-muted">{platform.slug}</small>
            </li>
          ))}
        </ul>
      </div>
      
      <div class="col-md-6">
        <h2>Inserts ({inserts.length} total)</h2>
        <ul class="list-group">
          {sampleInserts.map(insert => (
            <li class="list-group-item">
              <strong>{insert.data.title || insert.slug}</strong>
              <br />
              <small class="text-muted">{insert.slug}</small>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </div>
</BaseLayout>