---
import { getCollection } from 'astro:content';
import Article from '../templates/Article.astro';
import VueArticle from '../templates/VueArticle.astro';
import Platform from '../templates/Platform.astro';
import BareArticle from '../templates/BareArticle.astro';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  const vueArticles = await getCollection('vue-articles');
  const platforms = await getCollection('platforms');
  const bareArticles = await getCollection('bare-articles');
  const events = await getCollection('events');
  
  const paths = [];
  
  // Generate paths for regular articles
  articles.forEach((entry) => {
    const slug = entry.data.slug;
    paths.push({
      params: { slug: slug },
      props: { 
        collection: 'articles',
        entrySlug: entry.slug,
        template: 'article'
      }
    });
  });
  
  // Generate paths for Vue articles
  vueArticles.forEach((entry) => {
    const slug = entry.data.slug;
    paths.push({
      params: { slug: slug },
      props: { 
        collection: 'vue-articles',
        entrySlug: entry.slug,
        template: 'vue-article'
      }
    });
  });
  
  // Generate paths for platforms
  platforms.forEach((entry) => {
    const slug = entry.data.slug;
    paths.push({
      params: { slug: slug },
      props: { 
        collection: 'platforms',
        entrySlug: entry.slug,
        template: 'platform'
      }
    });
  });
  
  // Generate paths for bare articles
  bareArticles.forEach((entry) => {
    const slug = entry.data.slug;
    paths.push({
      params: { slug: slug },
      props: { 
        collection: 'bare-articles',
        entrySlug: entry.slug,
        template: 'bare'
      }
    });
  });
  
  // Generate paths for events
  events.forEach((entry) => {
    const slug = entry.data.slug;
    paths.push({
      params: { slug: slug },
      props: { 
        collection: 'events',
        entrySlug: entry.slug,
        template: 'event'
      }
    });
  });
  
  return paths;
}

const { collection, entrySlug, template } = Astro.props;
---

{template === 'article' && <Article slug={entrySlug} collection={collection} />}
{template === 'vue-article' && <VueArticle slug={entrySlug} collection={collection} />}
{template === 'platform' && <Platform slug={entrySlug} collection={collection} />}
{template === 'bare' && <BareArticle slug={entrySlug} collection={collection} />}
{template === 'event' && <Article slug={entrySlug} collection={collection} />}