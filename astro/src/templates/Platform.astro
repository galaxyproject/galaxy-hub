---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getEntry } from 'astro:content';

export interface Props {
  slug: string;
  collection: string;
}

const { slug, collection } = Astro.props;
const entry = await getEntry(collection, slug);

if (!entry) {
  return Astro.redirect('/404');
}

const { Content } = await entry.render();
const { data } = entry;
---

<BaseLayout title={data.title || 'Galaxy Platform'}>
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <article class="platform-page">
          <header class="mb-4">
            <h1>{data.title}</h1>
            {data.platform_url && (
              <p class="lead">
                <a href={data.platform_url} target="_blank" rel="noopener noreferrer">
                  {data.platform_text || data.platform_url}
                </a>
              </p>
            )}
          </header>
          
          <div class="platform-info mb-4">
            {data.platform_group && (
              <div class="info-item">
                <strong>Group:</strong> {data.platform_group}
              </div>
            )}
            {data.platform_purview && (
              <div class="info-item">
                <strong>Purview:</strong> {data.platform_purview}
              </div>
            )}
            {data.platform_location && (
              <div class="info-item">
                <strong>Location:</strong> {data.platform_location}
              </div>
            )}
            {data.platform_status && (
              <div class="info-item">
                <strong>Status:</strong> 
                <span class={`badge badge-${data.platform_status === 'Active' ? 'success' : 'secondary'}`}>
                  {data.platform_status}
                </span>
              </div>
            )}
          </div>
          
          <div class="content">
            <Content />
          </div>
        </article>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  .platform-page {
    max-width: 1000px;
    margin: 0 auto;
  }
  
  .platform-info {
    background-color: #f8f9fa;
    padding: 1.5rem;
    border-radius: 0.25rem;
  }
  
  .info-item {
    margin-bottom: 0.5rem;
  }
  
  .info-item:last-child {
    margin-bottom: 0;
  }
  
  .content {
    line-height: 1.6;
  }
  
  .content :global(h2) {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .content :global(h3) {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .content :global(img) {
    max-width: 100%;
    height: auto;
  }
  
  .content :global(table) {
    width: 100%;
    margin-bottom: 1rem;
  }
  
  .content :global(table td),
  .content :global(table th) {
    padding: 0.5rem;
    border: 1px solid #dee2e6;
  }
  
  .content :global(table th) {
    background-color: #f8f9fa;
    font-weight: bold;
  }
</style>